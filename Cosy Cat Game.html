<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whiskers & Windowsill</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap');

        :root {
            --bg-day: #FDF6E3;
            --bg-night: #2C3E50;
            --primary: #E6B89C;
            --accent: #9CAFB7;
            --text: #5D5C61;
            --bar-bg: #e0e0e0;
            --bar-fill: #96C0B7;
            --cat-color: #555;
            --cat-belly: #777;
            --danger: #E57373;
            --success: #81C784;
        }

        * {
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-day);
            color: var(--text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            transition: background-color 2s ease;
        }

        /* Game Container */
        #game-container {
            width: 100%;
            max-width: 450px;
            height: 100vh;
            position: relative;
            display: flex;
            flex-direction: column;
            background: #fff;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        @media (min-width: 451px) {
            #game-container {
                height: 800px;
                border-radius: 20px;
                margin: 20px;
                border: 8px solid #fff;
            }
        }

        /* Window View (Day/Night Cycle) */
        .window-view {
            flex: 1;
            background: #87CEEB; /* Day sky */
            position: relative;
            overflow: hidden;
            transition: background 2s ease;
            border-bottom: 12px solid #D7CCC8; /* Windowsill */
        }

        .window-view.night {
            background: #1a2a3a;
        }

        /* Clouds */
        .cloud {
            position: absolute;
            background: rgba(255,255,255,0.8);
            border-radius: 50px;
            animation: floatCloud 20s linear infinite;
        }
        .cloud.c1 { width: 60px; height: 20px; top: 20%; left: -60px; animation-duration: 25s; }
        .cloud.c2 { width: 100px; height: 30px; top: 10%; left: -100px; animation-duration: 35s; animation-delay: 5s; }

        @keyframes floatCloud {
            0% { transform: translateX(0); }
            100% { transform: translateX(600px); }
        }

        /* Moon & Sun */
        .celestial {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            top: 30px;
            right: 30px;
            transition: all 2s ease;
        }
        .sun { background: #FFD54F; box-shadow: 0 0 20px #FFD54F; transform: translateY(0); opacity: 1; }
        .moon { background: #F4F6F7; box-shadow: 0 0 10px #fff; transform: translateY(100px); opacity: 0; }
        
        .night .sun { transform: translateY(200px); opacity: 0; }
        .night .moon { transform: translateY(0); opacity: 1; }

        /* Room Area */
        .room {
            height: 40%;
            background: #F5F5F5;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            padding-bottom: 40px;
        }

        /* The Cat CSS Art */
        .cat-container {
            position: relative;
            width: 120px;
            height: 100px;
            z-index: 10;
            transition: transform 0.3s ease;
        }

        .cat-body {
            position: absolute;
            bottom: 0;
            width: 80px;
            height: 50px;
            background: var(--cat-color);
            border-radius: 40px 40px 0 0;
            left: 20px;
        }

        .cat-head {
            position: absolute;
            bottom: 30px;
            left: 30px;
            width: 60px;
            height: 50px;
            background: var(--cat-color);
            border-radius: 30px;
        }

        .ear {
            position: absolute;
            top: -10px;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 20px solid var(--cat-color);
        }
        .ear.left { left: 5px; transform: rotate(-15deg); }
        .ear.right { right: 5px; transform: rotate(15deg); }

        .eye {
            position: absolute;
            top: 18px;
            width: 6px;
            height: 6px;
            background: #fff;
            border-radius: 50%;
            animation: blink 4s infinite;
        }
        .eye.left { left: 15px; }
        .eye.right { right: 15px; }
        .eye::after {
            content: '';
            position: absolute;
            top: 1px;
            left: 2px;
            width: 2px;
            height: 4px;
            background: #000;
            border-radius: 50%;
        }
        .closed-eye {
            display: none;
            position: absolute;
            top: 20px;
            width: 8px;
            height: 2px;
            background: transparent;
            border-top: 2px solid #333;
            border-radius: 50%;
        }
        .sleeping .eye { display: none; }
        .sleeping .closed-eye { display: block; }
        .sleeping .cat-container { transform: scaleY(0.8) translateY(10px); }

        @keyframes blink {
            0%, 96%, 100% { transform: scaleY(1); }
            98% { transform: scaleY(0.1); }
        }

        .nose {
            position: absolute;
            top: 28px;
            left: 27px;
            width: 6px;
            height: 4px;
            background: pink;
            border-radius: 50%;
        }

        .tail {
            position: absolute;
            bottom: 5px;
            right: 15px;
            width: 10px;
            height: 40px;
            background: var(--cat-color);
            border-radius: 10px;
            transform-origin: bottom center;
            transform: rotate(20deg);
            animation: wag 3s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes wag {
            0%, 100% { transform: rotate(20deg); }
            50% { transform: rotate(40deg); }
        }

        /* Status HUD */
        .hud {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            background: rgba(255,255,255,0.9);
            padding: 15px;
            border-radius: 15px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            z-index: 100;
        }

        .stat {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .stat-label {
            font-size: 0.75rem;
            font-weight: 700;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .progress-bar {
            height: 8px;
            background: var(--bar-bg);
            border-radius: 4px;
            overflow: hidden;
        }

        .fill {
            height: 100%;
            width: 100%;
            background: var(--bar-fill);
            transition: width 0.5s ease, background-color 0.5s ease;
        }

        .stat.danger .fill { background: var(--danger); }

        /* Controls */
        .controls {
            background: #fff;
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            border-top: 1px solid #eee;
        }

        .btn {
            background: #f8f8f8;
            border: none;
            border-radius: 15px;
            padding: 15px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #555;
        }

        .btn:active { transform: scale(0.95); }
        .btn svg { width: 24px; height: 24px; stroke: currentColor; stroke-width: 2; fill: none; }
        .btn span { font-size: 0.8rem; font-weight: bold; }

        .btn.active { background: var(--primary); color: white; }

        /* Dialogue / Events */
        .dialogue-box {
            position: absolute;
            bottom: 140px;
            left: 50%;
            transform: translateX(-50%);
            background: #fff;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            text-align: center;
            width: 80%;
            z-index: 50;
        }
        .dialogue-box.visible { opacity: 1; }

        /* Unlockables (Decor) */
        .decor {
            position: absolute;
            opacity: 0;
            transition: opacity 1s;
            pointer-events: none;
        }
        .decor.unlocked { opacity: 1; }
        
        /* Plant */
        .plant { bottom: 12px; left: 20px; font-size: 40px; }
        /* Rug */
        .rug { bottom: 0; left: 50%; transform: translateX(-50%); width: 160px; height: 10px; background: #E0F2F1; border-radius: 50%; z-index: 1; border: 2px dashed #B2DFDB; }
        /* Yarn */
        .yarn { bottom: 15px; right: 40px; width: 20px; height: 20px; background: #E91E63; border-radius: 50%; z-index: 2; }

        /* Floating Emojis */
        .floater {
            position: absolute;
            animation: floatUp 1.5s ease-out forwards;
            font-size: 1.5rem;
            pointer-events: none;
            z-index: 200;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(0.5); opacity: 0; }
            20% { opacity: 1; transform: translateY(-10px) scale(1.2); }
            100% { transform: translateY(-50px) scale(1); opacity: 0; }
        }

        /* Currency UI */
        .currency {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #fff;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            color: #666;
            display: flex;
            align-items: center;
            gap: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 101;
        }

    </style>
</head>
<body>

    <div id="game-container">
        <!-- Currency -->
        <div class="currency">
            <span>â™¥</span> <span id="comfort-points">0</span> Comfort
        </div>

        <!-- HUD -->
        <div class="hud">
            <div class="stat" id="hunger-stat">
                <span class="stat-label">Hunger</span>
                <div class="progress-bar"><div class="fill" style="width: 80%;"></div></div>
            </div>
            <div class="stat" id="energy-stat">
                <span class="stat-label">Energy</span>
                <div class="progress-bar"><div class="fill" style="width: 60%;"></div></div>
            </div>
            <div class="stat" id="fun-stat">
                <span class="stat-label">Fun</span>
                <div class="progress-bar"><div class="fill" style="width: 40%;"></div></div>
            </div>
            <div class="stat" id="love-stat">
                <span class="stat-label">Affection</span>
                <div class="progress-bar"><div class="fill" style="width: 90%;"></div></div>
            </div>
        </div>

        <!-- Scene -->
        <div class="window-view" id="window">
            <div class="celestial sun"></div>
            <div class="celestial moon"></div>
            <div class="cloud c1"></div>
            <div class="cloud c2"></div>
        </div>

        <div class="room">
            <!-- Unlocks -->
            <div class="decor plant" id="decor-plant">ðŸŒ¿</div>
            <div class="decor rug" id="decor-rug"></div>
            <div class="decor yarn" id="decor-yarn"></div>

            <!-- Dialogue -->
            <div class="dialogue-box" id="dialogue">
                Meow!
            </div>

            <!-- Cat Character -->
            <div class="cat-container" id="cat">
                <div class="tail"></div>
                <div class="cat-body"></div>
                <div class="cat-head">
                    <div class="ear left"></div>
                    <div class="ear right"></div>
                    <div class="eye left"></div>
                    <div class="eye right"></div>
                    <div class="closed-eye" style="left: 15px;"></div>
                    <div class="closed-eye" style="right: 15px;"></div>
                    <div class="nose"></div>
                </div>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <button class="btn" id="btn-feed">
                <svg viewBox="0 0 24 24"><path d="M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"/></svg>
                <span>Feed</span>
            </button>
            <button class="btn" id="btn-sleep">
                <svg viewBox="0 0 24 24"><path d="M9 21h9c.83 0 1.54-.5 1.84-1.22l.02-.05c.21-.51.14-1.06-.2-1.46-.06-.07-3.26-3.93-3.59-5.81-.36-2.02.2-3.71.74-5.03.13-.32.03-.69-.22-.89-.25-.21-.61-.2-.84.02-.62.61-1.53 2.07-1.9 4.17-.31 1.79 1.11 4.29 3.18 6.27H9c-5 0-9-4-9-9s4-9 9-9c.28 0 .5.22.5.5S9.28.5 9 .5C4.3 .5.5 4.3.5 9s3.8 8.5 8.5 8.5c.34 0 .68-.02 1-.06-.31-1.63-1.56-2.74-3-2.74-.55 0-1 .45-1 1s.45 1 1 1c.31 0 .59.13.79.34l.07.08c.34.4.3 1-.12 1.32C8.54 20.1 8.77 21 9 21z"/></svg>
                <span>Rest</span>
            </button>
            <button class="btn" id="btn-play">
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="4"/><line x1="12" y1="8" x2="12" y2="2"/><line x1="12" y1="16" x2="12" y2="22"/><line x1="16" y1="12" x2="22" y2="12"/><line x1="8" y1="12" x2="2" y2="12"/></svg>
                <span>Play</span>
            </button>
            <button class="btn" id="btn-pet">
                <svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
                <span>Love</span>
            </button>
        </div>
    </div>

    <script>
        // Game State
        const state = {
            hunger: 80,
            energy: 80,
            fun: 80,
            love: 50,
            comfortPoints: 0,
            isSleeping: false,
            isNight: false
        };

        // DOM Elements
        const els = {
            hungerBar: document.querySelector('#hunger-stat .fill'),
            energyBar: document.querySelector('#energy-stat .fill'),
            funBar: document.querySelector('#fun-stat .fill'),
            loveBar: document.querySelector('#love-stat .fill'),
            cat: document.getElementById('cat'),
            window: document.getElementById('window'),
            dialogue: document.getElementById('dialogue'),
            pts: document.getElementById('comfort-points'),
            decor: {
                plant: document.getElementById('decor-plant'),
                rug: document.getElementById('decor-rug'),
                yarn: document.getElementById('decor-yarn'),
            }
        };

        // Utility to clamp numbers
        const clamp = (num, min, max) => Math.min(Math.max(num, min), max);

        // Show floating text/emoji
        function spawnFloater(text, color = '#555') {
            const el = document.createElement('div');
            el.className = 'floater';
            el.textContent = text;
            el.style.color = color;
            
            // Random slight horizontal offset
            const offset = Math.random() * 40 - 20;
            el.style.left = `calc(50% + ${offset}px)`;
            el.style.bottom = '100px';
            
            document.querySelector('.room').appendChild(el);
            setTimeout(() => el.remove(), 1500);
        }

        // Update Dialogue
        let dialogueTimeout;
        function say(text) {
            els.dialogue.textContent = text;
            els.dialogue.classList.add('visible');
            clearTimeout(dialogueTimeout);
            dialogueTimeout = setTimeout(() => {
                els.dialogue.classList.remove('visible');
            }, 3000);
        }

        // Update UI Bars
        function updateUI() {
            els.hungerBar.style.width = `${state.hunger}%`;
            els.energyBar.style.width = `${state.energy}%`;
            els.funBar.style.width = `${state.fun}%`;
            els.loveBar.style.width = `${state.love}%`;
            els.pts.textContent = Math.floor(state.comfortPoints);

            // Color coding
            els.hungerBar.parentElement.parentElement.classList.toggle('danger', state.hunger < 30);
            els.energyBar.parentElement.parentElement.classList.toggle('danger', state.energy < 30);
            els.funBar.parentElement.parentElement.classList.toggle('danger', state.fun < 30);
        }

        // Check Unlocks
        function checkUnlocks() {
            if (state.comfortPoints >= 100) els.decor.plant.classList.add('unlocked');
            if (state.comfortPoints >= 300) els.decor.rug.classList.add('unlocked');
            if (state.comfortPoints >= 600) els.decor.yarn.classList.add('unlocked');
        }

        // Game Loop
        setInterval(() => {
            if (state.isSleeping) {
                state.energy = clamp(state.energy + 2, 0, 100);
                state.hunger = clamp(state.hunger - 0.5, 0, 100);
            } else {
                state.hunger = clamp(state.hunger - 1, 0, 100);
                state.energy = clamp(state.energy - 0.5, 0, 100);
                state.fun = clamp(state.fun - 0.8, 0, 100);
            }

            // Passive point gain if happy
            if (state.hunger > 50 && state.energy > 50 && state.fun > 50) {
                state.comfortPoints += 0.5;
                state.love = clamp(state.love + 0.1, 0, 100);
            }

            // Auto-wake if full energy
            if (state.isSleeping && state.energy >= 100) {
                toggleSleep();
                say("I'm wide awake now!");
            }

            // Warnings
            if (state.hunger < 20 && Math.random() > 0.9) say("Feed me...");
            if (state.energy < 20 && !state.isSleeping && Math.random() > 0.9) say("So sleepy...");

            updateUI();
            checkUnlocks();
        }, 1000);

        // Interaction Logic
        function interact(type) {
            if (state.isSleeping && type !== 'sleep') {
                say("Zzz... (I'm sleeping)");
                return;
            }

            const catStyle = els.cat.style;

            switch(type) {
                case 'feed':
                    if (state.hunger >= 100) {
                        say("I'm full!");
                    } else {
                        state.hunger = clamp(state.hunger + 30, 0, 100);
                        spawnFloater("ðŸŸ");
                        say("Yummy!");
                        // Bounce animation
                        catStyle.transform = "scale(1.1)";
                        setTimeout(() => catStyle.transform = "scale(1)", 200);
                    }
                    break;
                
                case 'sleep':
                    toggleSleep();
                    break;

                case 'play':
                    if (state.energy < 20) {
                        say("Too tired to play...");
                    } else {
                        state.fun = clamp(state.fun + 25, 0, 100);
                        state.energy = clamp(state.energy - 15, 0, 100);
                        state.hunger = clamp(state.hunger - 5, 0, 100);
                        spawnFloater("ðŸ§¶");
                        say("Wheee!");
                        
                        // Jump animation
                        catStyle.transform = "translateY(-20px) rotate(5deg)";
                        setTimeout(() => catStyle.transform = "translateY(0) rotate(0)", 300);
                    }
                    break;

                case 'pet':
                    state.love = clamp(state.love + 5, 0, 100);
                    state.comfortPoints += 2;
                    spawnFloater("â¤ï¸");
                    say("Purrrrr...");
                    break;
            }
            updateUI();
        }

        function toggleSleep() {
            state.isSleeping = !state.isSleeping;
            document.body.classList.toggle('sleeping', state.isSleeping);
            
            // Toggle Day/Night visual
            state.isNight = !state.isNight;
            els.window.classList.toggle('night', state.isNight);

            const btn = document.getElementById('btn-sleep');
            if (state.isSleeping) {
                say("Goodnight...");
                btn.classList.add('active');
                btn.querySelector('span').textContent = "Wake";
            } else {
                say("Morning!");
                btn.classList.remove('active');
                btn.querySelector('span').textContent = "Rest";
            }
        }

        // Event Listeners
        document.getElementById('btn-feed').onclick = () => interact('feed');
        document.getElementById('btn-sleep').onclick = () => interact('sleep');
        document.getElementById('btn-play').onclick = () => interact('play');
        document.getElementById('btn-pet').onclick = () => interact('pet');

        // Initial Hello
        setTimeout(() => say("Hi! Take care of me?"), 1000);

    </script>
</body>
</html>
